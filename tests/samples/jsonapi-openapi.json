{
  "openapi": "3.1.0",
  "info": {
    "title": "Example of a JSON API in a OpenAPI format",
    "description": "My json api example",
    "version": "0.1.0"
  },
  "paths": {
    "/model/": {
      "post": {
        "tags": [
          "Model"
        ],
        "summary": "Create a new model",
        "description": "Creates a new model resource with the provided data.",
        "operationId": "create_model",
        "parameters": [
          {
            "name": "fields[model]",
            "in": "query",
            "description": "Specifies which fields should be returned.",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "componentType",
                  "count",
                  "array",
                  "modelType",
                  "subModel",
                  "view",
                  "name"
                ]
              }
            },
            "explode": false
          },
          {
            "name": "include",
            "in": "query",
            "description": "Specifies which related resources should be returned.",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "view",
                  "subModel"
                ]
              }
            },
            "explode": false
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ModelResourceCreationRequestBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Success response.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "included",
                    "links"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ModelResourceObject"
                      }
                    },
                    "included": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ModelResourceRelationshipValue"
                      }
                    },
                    "links": {
                      "type": "object",
                      "required": [
                        "self"
                      ],
                      "properties": {
                        "self": {
                          "type": "string",
                          "default": "/model"
                        },
                        "first": {
                          "type": [
                            "string",
                            "null"
                          ],
                          "default": "/model?page[number]=1&page[size]=10"
                        },
                        "last": {
                          "type": [
                            "string",
                            "null"
                          ],
                          "default": "/model?page[number]=10&page[size]=10"
                        },
                        "prev": {
                          "type": [
                            "string",
                            "null"
                          ],
                          "default": "/model?page[number]=2&page[size]=10"
                        },
                        "next": {
                          "type": [
                            "string",
                            "null"
                          ],
                          "default": "/model?page[number]=4&page[size]=10"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "4XX": {
            "description": "Client error response.",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "type": "object",
                      "required": [
                        "errors"
                      ],
                      "properties": {
                        "errors": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "required": [
                              "status",
                              "title",
                              "detail"
                            ],
                            "properties": {
                              "status": {
                                "type": "string",
                                "example": "404"
                              },
                              "title": {
                                "type": "string",
                                "example": "Not found"
                              },
                              "detail": {
                                "type": "string",
                                "example": "The requested resource cannot be found."
                              },
                              "source": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "$ref": "#/components/schemas/Source"
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                },
                "example": "\n{\n  \"errors\": [\n    {\n      \"status\": \"404\",\n      \"title\": \"Resource not found\",\n      \"detail\": \"The requested resource could not be found.\"\n    }\n  ]\n}\n"
              }
            }
          },
          "5XX": {
            "description": "Server error response.",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "type": "object",
                      "required": [
                        "errors"
                      ],
                      "properties": {
                        "errors": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "required": [
                              "status",
                              "title",
                              "detail"
                            ],
                            "properties": {
                              "status": {
                                "type": "string",
                                "example": "404"
                              },
                              "title": {
                                "type": "string",
                                "example": "Not found"
                              },
                              "detail": {
                                "type": "string",
                                "example": "The requested resource cannot be found."
                              },
                              "source": {
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "$ref": "#/components/schemas/Source"
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                },
                "example": "\n{\n  \"errors\": [\n    {\n      \"status\": \"500\",\n      \"title\": \"Internal server error\",\n      \"detail\": \"The server has encountered a situation it does not know how to handle.\"\n    }\n  ]\n}\n"
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ModelComponentType": {
        "type": "integer",
        "description": "The datatype of the model’s components.",
        "enum": [
          0,
          1,
          2,
          3,
          5,
          6
        ],
        "example": 0
      },
      "ModelResourceCreationAttributes": {
        "type": "object",
        "required": [
          "componentType",
          "count",
          "type"
        ],
        "properties": {
          "byteOffset": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "An offset.",
            "default": 0,
            "minimum": 0
          },
          "componentType": {
            "$ref": "#/components/schemas/ModelComponentType",
            "description": "The datatype of the model’s components."
          },
          "count": {
            "type": "integer",
            "format": "int32",
            "description": "A count.",
            "minimum": 1
          },
          "type": {
            "$ref": "#/components/schemas/ModelType",
            "description": "Specifies the model’s type."
          },
          "array": {
            "type": [
              "array",
              "null"
            ],
            "items": {},
            "description": "An array."
          },
          "name": {
            "type": [
              "string",
              "null"
            ],
            "description": "A name."
          }
        }
      },
      "ModelResourceCreationPayload": {
        "allOf": [
          {
            "type": "object",
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "default": "model"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "attributes"
            ],
            "properties": {
              "attributes": {
                "$ref": "#/components/schemas/ModelResourceCreationAttributes"
              },
              "relationships": {
                "$ref": "#/components/schemas/ModelResourceCreationRelationships"
              }
            }
          }
        ]
      },
      "ModelResourceCreationRelationships": {
        "type": "object",
        "properties": {
          "view": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ViewResourceRelationshipToOne"
              }
            ]
          },
          "subModel": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/SubModelResourceRelationshipToOne"
              }
            ]
          }
        }
      },
      "ModelResourceCreationRequestBody": {
        "type": "object",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ModelResourceCreationPayload"
          }
        }
      },
      "ModelResourceIdentifierObject": {
        "allOf": [
          {
            "type": "object",
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "default": "model"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "id"
            ],
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            }
          }
        ]
      },
      "ModelResourceObject": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ModelResourceIdentifierObject"
          },
          {
            "type": "object",
            "required": [
              "attributes",
              "relationships"
            ],
            "properties": {
              "attributes": {
                "$ref": "#/components/schemas/SubModelResourceAttributesObject"
              },
              "relationships": {
                "$ref": "#/components/schemas/SubModelResourceRelationshipsObject"
              }
            }
          }
        ],
        "description": "Some model included in the original model."
      },
      "ModelResourceRelationshipValue": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/SubModelResourceObject"
          },
          {
            "$ref": "#/components/schemas/ViewResourceObject"
          }
        ]
      },
      "SubModelResourceAttributesObject": {
        "type": "object",
        "properties": {
          "byteOffset": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "The offset.",
            "default": 0,
            "minimum": 0
          },
          "componentType": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ModelComponentType",
                "description": "The datatype of the model."
              }
            ]
          },
          "count": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "A number.",
            "minimum": 1
          },
          "type": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ModelType",
                "description": "The model’s type."
              }
            ]
          },
          "array": {
            "type": [
              "array",
              "null"
            ],
            "items": {},
            "description": "An array."
          },
          "name": {
            "type": [
              "string",
              "null"
            ],
            "description": "A name."
          }
        }
      },
      "SubModelResourceRelationshipsObject": {
        "type": "object",
        "properties": {
          "view": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ViewResourceRelationshipToOne"
              }
            ]
          },
          "subModel": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/SubModelResourceRelationshipToOne"
              }
            ]
          }
        }
      },
      "SubModelResourceIdentifierObject": {
        "allOf": [
          {
            "type": "object",
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "default": "model-subModel"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "id"
            ],
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            }
          }
        ]
      },
      "SubModelResourceObject": {
        "allOf": [
          {
            "$ref": "#/components/schemas/SubModelResourceIdentifierObject"
          },
          {
            "type": "object",
            "required": [
              "attributes",
              "relationships"
            ],
            "properties": {
              "attributes": {
                "$ref": "#/components/schemas/SubSubModelResourceAttributesObject"
              },
              "relationships": {
                "$ref": "#/components/schemas/SubSubModelResourceRelationshipsObject"
              }
            }
          }
        ],
        "description": "Some submodel."
      },
      "SubModelResourceRelationshipToOne": {
        "type": "object",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "$ref": "#/components/schemas/SubModelResourceIdentifierObject"
          }
        }
      },
      "SubSubModelResourceAttributesObject": {
        "type": "object",
        "properties": {
          "count": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "A number.",
            "minimum": 0
          }
        }
      },
      "SubSubModelResourceRelationshipsObject": {
        "type": "object",
        "properties": {
          "values": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/SubModelValuesResourceRelationshipToOne"
              }
            ]
          }
        }
      },
      "SubModelValuesResourceIdentifierObject": {
        "allOf": [
          {
            "type": "object",
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "default": "model-sub-model-values"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "id"
            ],
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            }
          }
        ]
      },
      "SubModelValuesResourceRelationshipToOne": {
        "type": "object",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "$ref": "#/components/schemas/SubModelValuesResourceIdentifierObject"
          }
        }
      },
      "ModelType": {
        "type": "string",
        "description": "Set a model type",
        "enum": [
          "TYPE_A",
          "TYPE_B",
          "TYPE_C"
        ]
      },
      "ViewResourceIdentifierObject": {
        "allOf": [
          {
            "type": "object",
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "default": "view"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "id"
            ],
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid"
              }
            }
          }
        ]
      },
      "ViewResourceObject": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ViewResourceIdentifierObject"
          }
        ],
        "description": "A view."
      },
      "ViewResourceRelationshipToOne": {
        "type": "object",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ViewResourceIdentifierObject"
          }
        }
      },
      "Source": {
        "type": "object",
        "required": [
          "pointer"
        ],
        "properties": {
          "pointer": {
            "type": "string"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Model",
      "description": "Endpoints for the `Model` resource."
    }
  ]
}
